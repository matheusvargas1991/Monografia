%================================================================
\chapter{O programa E-foto}
%================================================================

Nesse capítulo será apresentado o software E-foto, suas funcionalidades e o que deve ser feito para sua obtenção e instalação. Sendo explicado que pacotes serão necessários para o funcionamento do programa após e realização do seu download.
%fiz uma introduçaõ genérica, que deve ser modificada quando o projeto for mais completo

\section{O que é o E-foto}

O E-foto é um software live para fotogrametria digital que é desenvolvido pelo laboratório de fotogrametria da Universidade do Estado do Rio de Janeiro desde 2004 e tem como objetivo, além da criação de um software inteiramente funcional (uma estação fotogramétrica gratuita), levar aos alunos o conhecimento de forma gratuita sobre fotogrametria digital, sendo de forma didática ou ate mesmo na prática por meio de acesso ao código, uso da plataforma e até criação de novos módulos para o software. A fotogrametria é a obtenção de informações confiáveis por meio de imagens obtidas por sensores, sendo no caso da fotogrametria digital a entrada de dados são imagens digitais provenientes de máquinas digitais ou pela digitalização de imagens obtidas de forma analógica.

\section{Instalação do E-foto}
\subsection{Em Sistemas Linux}
\subsection{Em Sistemas Windows}

\subsection{Compilação do E-foto a partir dos fontes}
\subsection{Em Sistemas Linux}
% é necessário que você faça um verdadeiro passo a passo.
% detalhe cada passo. Pense que você está ensinando o seu pai a compilar o e-foto. Seja minucioso e sem ambiguidades. 

\subsubsection{Passo 1 - Baixar código fonte}
Primeiramente, para realizar a instalação do software E-foto, o usuário deve fazer o download do seu código fonte e para isso é necessário a instalação do subversion. Para tal instalação, o usuário deve abrir o terminal do seu sistema Linux que pode ser feito digitando terminal na barra de busca ao apertar a tecla do Windows no seu teclado ou pelo atalho do teclado ctrl + alt + T. Com o terminal aberto, o usuário começará a instalação do SVN com o comando sudo apt update (que atualizará o gerenciador de pacotes) e sudo apt install apache2 apache2-utils (que instalará os pacotes do apache2, onde Apache licencia um sistema de controle de versão de código aberto). Logo após execute o comando sudo apt-get install subversion libapache2-mod-svn subversion-tools libsvn-dev (que instalará o SVN e todas as dependências necessárias). Agora é preciso habilitar os módulos apache2 para o SVN funcionar e isso é feito com os comandos sudo a2enmod dav e sudo a2enmod dav\_svn. Então o usuário tem que reiniciar o Apache com o comando sudo service apache2 restart. O próximo passo é criar uma conta de usuário SVN que é feito com o comando sudo htpasswd -cm /etc/apache2/dav\_svn.passwd admin (nesse passo o usuário precisará fornecer sua senha de administrador). E o último passo de configuração do SVN é reiniciá-lo com o comando sudo systemctl restart apache2.service. Com o SVN instalado e configurado, basta o usuário colocar no terminal o comando svn checkout https://svn.code.sf.net/p/e-foto/code que o download de todo o código fonte do software E-foto será feito automaticamente.  %O que muda aqui? Não vi nenhuma diferença entre ubuntu18.04 e 20.04 depois deste ponto. Por que ele tem que escolher aqui se essa escolha não muda nada depois?
 %O e-foto só tem um código, tanto para windows, ubuntu 18 20, ou qualquer versão. A versão estável é compilável em qualquer sistema.
  % nunca tive o tortoiseSVN. Ele não é necessãrio para baixar o efoto. O usuário precisa do subversion instalado. Mostre como instala o subversion. Tortoise é só uma interface gráfica para o svn. Qual o comando para isso?
   %não se "adquire" softwware livre. Ele pode ser baixado e sempre é gratuito. De qualquer forma, tortoise não é necessário. Ele pode ser instalado usando apt. Não precisa passar nenhum site
   % quais são os comandos? Você tem que fazer um be-a-bá. Você acha que seu pai conseguiria saber o que é opção de checkout? Dê exatament5e co comando necessário para baixar o efoto por svn
    
    
  \subsubsection{Passo 2 - Instalar pacotes necessários à compilação}  %a partir daqui você edita e coloca os outros passos. O mesmo apra o windows. Dê exatamente cada comando necessário para instalar cada pacote.
    Após a realização do download do código fonte do E-foto, o usuário deve ficar atento aos pacotes necessários em seu ambiente para que o software E-foto possa ser instalado e ter seu funcionamento sem erros. Para a instalação dos pacotes o usuário deve buscar abrir novamente o terminal e também usar o comando sudo apt-get update. Um desses pacotes que são necessários é o libgdal.dev, que deve ser instalado a partir do seguinte comando no terminal sudo apt-get install libgdal-dev, onde GDAL é uma biblioteca de tradução para formatos geoespaciais, outros pacotes de grande importância são os de dependência do Qt 5 que são os pacotes build-essential que deve ser instalado com o comando sudo apt-get install build-essential no terminal, que proverá os compiladores necessários. O comando sudo apt-get install libfontconfig1 instalará um pacote que contém uma biblioteca projetada para achar fontes no sistema e selecioná-las de acordo com os requisitos especificados pelas aplicações, e para instalar o driver XCB e o OpenGl o usuário deve usar o comando sudo apt-get install mesa-common-dev e também o comando sudo apt-get install libx11-xcb-dev libglu1-mesa-dev . Por último os pacotes para a instalação do Qt 5 propriamente dito que são os pacotes qt5-default, instalado através do comando no terminal sudo apt-get install qt5-default, e qt5-qmake, instalado através do comando sudo apt-get install -y qt5-qmake, que permitirão o uso do Qt 5 e consequentemente a instalação do Software E-foto, para compilar e executar o código do E-foto via terminal, após a realização de todos os passos necessários, o usuário deve primeiramente percorrer, através do comando cd diretório/, até o diretório onde está o arquivo e-foto.pro (atualmente code/branches/e-foto-trunk-candidate) e usar o comando qmake e-foto.pro, depois o comando make e aguardar a compilação terminar. Por fim o usuário deve usar o comando ./build/bin/e-foto no terminal para executar o programa E-foto.

\subsection{Em Sistemas Windows}

Em sistemas Windows o usuário deve se certificar de estar utilizando um sistema de 64-bits pois não existe versão do E-foto para sistemas de 32-bits, para realizar esse procedimento de verificação de qual é a versão do sistema que está sendo utilizada basta digitar "informações do sistema" no menu iniciar, no menu Resumo do Sistema existe a opção Versão do Sistema que dará ao usuário essa informação. O próximo passo é o download dos pacotes binários do Gdal no Windows que pode ser realizado através desse link https://repo.msys2.org/distrib/x86\_64/msys2-x86\_64-20200720.exe, % sublinhas têm quie ser colocadas depois do caracter de escape \, senão o latex tenta interpŕetar como comando
  após a o download e da instalação do MSYS o usuário deve executar o que vai abrir o terminal do próprio MSYS que contém uma versão portada do gerenciador de pacotes Pacman, nessa ultima versão do Pacman deve ser digitado no terminal o código pacman -Syuu, que gerará um série de instruções a serem seguidas até que o usuário possa repetir o código e receber a mensagem de que nada necessita ser atualizado. Com o ambiente atualizado o usuário deve digitar o seguinte comando pacman -S mingw64/mingw-w64-x86\_64-gdal, que realizará finalmente o binário da GDAL. Após todo esse procedimento o usuário pode consultar no terminal do MSYS através do código gdalinfo --version se o gdal realmente foi instalado e a versão em que ele está disponível. Para seguir, o usuário deve possuir o Tortoise SVN que pode ser adquirido gratuitamente por esse link https://tortoisesvn.net/downloads.html, após a instalação do SVN o usuário deve buscar no programa a opção de SVN Checkout e no espaço para colar uma URL colocar https://svn.code.sf.net/p/e-foto/code, que deve gerar o download de todo o código fonte do E-foto. O Usuário deve, por ultimo, realizar o download do Qt 5 e do Qtcreator no website https://www.qt.io/download, deixando claro que na parte da instalação deve ser instalado apenas o mingw 64-bits, e o Qt 5 referente a esse sistema. Com os arquivos do código fonte do E-foto disponíveis o usuário deve procurar no caminho e-foto-code/branches/e-foto-trunk-candidate por um arquivo chamado e-foto.pro. Quando abrir o projeto no Qtcreator será necessário configurar o que deverá ser usado, começando pela escolha do kit que será usado que é o Qt 5 e o mingw 64-bits. Após o projeto estar aberto, o usuário deve ir na guia project e desmarcar a opção shadow build, e depois procurar na aba build a opção build E-foto, quando acabar a compilação é só buscar a opção Run e o E-foto vai abrir pronto para o uso.